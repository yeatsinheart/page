figma.showUI(__html__,{width:375,height:640});figma.ui.onmessage=e=>{var s,n;if(e.type==="hello")figma.closePlugin("✅ 插件完成");else if(e.type==="resize")figma.ui.resize(e.width,e.height);else if(e.type==="import-json"){const o=JSON.parse(e.data),{collectionName:d,modes:m,variables:f}=o,i=(s=figma.variables.getLocalVariableCollections().find(a=>a.name===d))!=null?s:figma.variables.createVariableCollection(d);g(i,m),i.modes;for(const a of f){let t=i.variables.find(l=>l.name===a.name&&l.type===a.type);t||(t=figma.variables.createVariable(a.name,a.type,i.id));for(const l of m)if(a.values[l]!==void 0){const c=(n=i.modes.find(r=>r.name===l))==null?void 0:n.modeId;c&&t.setValueForMode(c,{r:1,g:0,b:0})}}figma.closePlugin(`导入完成，共 ${f.length} 个变量`)}};function g(e,s){const n=new Set(e.modes.map(o=>o.name));for(const o of s)n.has(o)?console.log(`✅ 已存在 mode: ${o}`):(e.addMode(o),console.log(`➕ 添加 mode: ${o}`))}
